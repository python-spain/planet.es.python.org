<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" lang="es">








<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="noarchive" />
    <meta http-equiv="Refresh" content="1800" />
    <link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
    <link rel="stylesheet" href="style.css" type="text/css" />
    <link rel="alternate" type="application/rss+xml" title="
    planet.es.python.org
" href="/rss.xml" />
    <title>
    planet.es.python.org
</title>
</head>
<body id="rawdog">
<div id="header">
    <h1><a href="/" style="color: black;">planet.<span style="color:#d40000">e</span><span style="color:#f3b52c">s</span>.<span style="color:#43648b">pyt</span><span style="color:#f3b52c">hon</span>.org</a></h1>
</div>
<div id="items">
<div class="day">
<h2>viernes, 03 julio</h2>
<div class="time">
<h3>11:39</h3>
<div class="item feed-207d1418 feed-{feed_id}" id="item-b047c5a5">
<p class="itemheader">
<span class="itemtitle">
    El Ornitorrinco Enmascarado:
<a href="http://www.elornitorrincoenmascarado.com/2009/07/novedades-de-python-31.html">Novedades de Python 3.1</a></span>
</p>
    <div class="itemdescription">
    <h2>Novedades de Python 3.1</h2>  <p>Traducci&#243;n del art&#237;culo original de <a class="reference external" href="http://docs.python.org/dev/py3k/whatsnew/3.1.html">Raymond Hettinger - What's New in Python 3.1</a>. En este art&#237;culo se repasan las principales diferencias de Python 3.1 con respecto a la versi&#243;n 3.0.</p>  <div class="section" id="pep-372-diccionarios-con-orden"><h2>PEP 372: Diccionarios con orden</h2><p>Los diccionarios normales en Python se pueden iterar, en forma de secuencia de parejas clave/valor, pero no se sigue un orden establecido. Durante mucho tiempo, diversos autores han propuesto implementaciones alternativas, que recordaban el orden en que se insertaron inicialmente las claves. Bas&#225;ndose en lo aprendido con estas implementaciones, se ha creado una nueva clase <tt class="docutils literal"><span class="pre">collections.OrderedDict</span></tt>.</p><p>La API de <tt class="docutils literal"><span class="pre">OrderedDict</span></tt> es b&#225;sicamente la misma que la de un diccionario normal, pero <strong>se garantiza que las iteraciones sobre claves y valores se producir&#225;n en el mismo orden en que las claves se insertaron originalmente</strong>. Si se reescribe un valor asociado con una clave ya existente, se mantiene la posici&#243;n de la inserci&#243;n original. Para forzar a que una entrada ya almacenada se traslade al final, debemos borrarla e insertarla de nuevo.</p><p>La librer&#237;a est&#225;ndar utiliza desde ahora esta nueva clase en varios m&#243;dulos. El m&#243;dulo <tt class="docutils literal"><span class="pre">configparser</span></tt>, por ejemplo, los usa ahora por defecto, de forma que al leer, modificar y volver a escribir un fichero de configuraci&#243;n, este mantiene su orden inicial. El m&#233;todo <tt class="docutils literal"><span class="pre">_asdict()</span></tt> de la clase <tt class="docutils literal"><span class="pre">collections.namedtuple()</span></tt> tambi&#233;n devuelve un diccionario ordenado, de forma que los valores siguen el mismo orden de la tupla original. El m&#243;dulo <tt class="docutils literal"><span class="pre">json</span></tt> incluye la posibilidad de usar una funci&#243;n <em>callback*</em> (usando el par&#225;metro opcional <tt class="docutils literal"><span class="pre">object_pairs_hook</span></tt>) que permite que los resultados devueltos por el decodificador sean diccionarios ordenados. Tambi&#233;n se han incluido en herramientas de terceras partes como <a class="reference external" href="http://pyyaml.org/">PyYAML</a>.</p><div class="note"><p class="first admonition-title">Note</p><p>PEP 372 - Diccionarios ordenados</p><ul class="last simple"><li><a class="reference external" href="http://www.python.org/dev/peps/pep-0372/">http://www.python.org/dev/peps/pep-0372/</a></li><li>PEP escrito por Armin Ronacher y Raymond Hettinger. Implementaci&#243;n de Raymond Hettinger.</li></ul></div></div>  <div class="section" id="pep-378-especificador-de-formato-para-millares"><h2>PEP 378: Especificador de formato para millares</h2><p>La funci&#243;n <tt class="docutils literal"><span class="pre">format()</span></tt> y el m&#233;todo <tt class="docutils literal"><span class="pre">str.format()</span></tt> utilizan un mini-lenguaje para indicar formatos, y dicho lenguaje incluye ahora la posibilidad de indicar, de forma simple e independiente de la configuraci&#243;n local del sistema, que se debe usar un car&#225;cter separador para indicar los millares. De esta forma se puede obtener un n&#250;mero m&#225;s f&#225;cil de leer por los humanos, mejorando as&#237; tanto la apariencia como la legibilidad:</p><pre class="literal-block"><br />&gt;&gt;&gt; format(1234567, ',d')<br />'1,234,567'<br />&gt;&gt;&gt; format(1234567.89, ',.2f')<br />'1,234,567.89'<br />&gt;&gt;&gt; format(12345.6 + 8901234.12j, ',f')<br />'12,345.600000+8,901,234.120000j'<br />&gt;&gt;&gt; format(Decimal('1234567.89'), ',f')<br />'1,234,567.89'<br /></pre><p>Los tipos de datos soportados son <tt class="docutils literal"><span class="pre">int</span></tt>, <tt class="docutils literal"><span class="pre">float</span></tt>, <tt class="docutils literal"><span class="pre">complex</span></tt> y <tt class="docutils literal"><span class="pre">decimal.Decimal</span></tt>.</p><p>Por el momento a&#250;n se est&#225;n discutiendo la mejor manera de poder indicar caracteres separadores alternativos, como puntos, espacios, ap&#243;strofes o subrayados. Las aplicaciones que prefieran atenerse a lo indicado en la configuraci&#243;n local deben usar el indicador de formato ya existente, <tt class="docutils literal"><span class="pre">n</span></tt>, que ya incorpora algo de soporte para separadores de millares.</p><div class="note"><p class="first admonition-title">Note</p><p>PEP 378 - Especificador de formato para millares</p><ul class="last simple"><li><a class="reference external" href="http://www.python.org/dev/peps/pep-0378/">http://www.python.org/dev/peps/pep-0378/</a></li><li>PEP escrito por Raymond Hettinger. Implementaci&#243;n de Eric Smith y Mark Dickinson.</li></ul></div></div>  <div class="section" id="otros-cambios-en-el-lenguaje"><h2>Otros cambios en el lenguaje</h2><p>Algunos cambios  menores llevados a cabo en el n&#250;cleo del lenguaje son:</p><blockquote><ul><li><p class="first">El tipo <tt class="docutils literal"><span class="pre">int()</span></tt> adquiere un nuevo m&#233;todo, <tt class="docutils literal"><span class="pre">bit_length</span></tt>, que devuelve el n&#250;mero de bits que hacen falta para representar su argumento en binario:</p><pre class="literal-block"><br />&gt;&gt;&gt; n = 37<br />&gt;&gt;&gt; bin(37)<br />'0b100101'<br />&gt;&gt;&gt; n.bit_length()<br />6<br />&gt;&gt;&gt; n = 2**123-1<br />&gt;&gt;&gt; n.bit_length()<br />123<br />&gt;&gt;&gt; (n+1).bit_length()<br />124<br /></pre><p>(Contribuci&#243;n de Fredrik Johansson, Victor Stinner, Raymond Hettinger, y Mark Dickinson; <a class="reference external" href="http://bugs.python.org/issue3439">issue 3439</a>.)</p></li><li><p class="first">Los campos en las cadenas de formato de <tt class="docutils literal"><span class="pre">format()</span></tt> se numeran autom&#225;ticamente:</p><pre class="literal-block"><br />&gt;&gt;&gt; 'Sir {} of {}'.format('Gallahad', 'Camelot')<br />'Sir Gallahad of Camelot'<br /></pre><p>Antes, la cadena de texto deb&#237;a incluir campos numerados como en:</p><pre class="literal-block"><br />'Sir {0} of {1}'<br /></pre><p>(Contribuci&#243;n de Eric Smith; <a class="reference external" href="http://bugs.python.org/issue5237">issue 5237</a>).</p></li><li><p class="first">La funci&#243;n <tt class="docutils literal"><span class="pre">string.maketrans()</span></tt> queda desfasada, y es reemplazada por dos nuevos m&#233;todos est&#225;ticos, <tt class="docutils literal"><span class="pre">bytes.maketrans()</span></tt> y <tt class="docutils literal"><span class="pre">bytearray.maketrans()</span></tt>. De esta forma se soluciona la confusi&#243;n que exist&#237;a acerca de los tipos de datos soportados por el m&#243;dulo <tt class="docutils literal"><span class="pre">string</span></tt>. Ahora, cada tipo de datos: <tt class="docutils literal"><span class="pre">str</span></tt>, <tt class="docutils literal"><span class="pre">bytes</span></tt> y <tt class="docutils literal"><span class="pre">bytearray</span></tt> dispone de sus propios m&#233;todos <tt class="docutils literal"><span class="pre">maketrans</span></tt> y <tt class="docutils literal"><span class="pre">translate</span></tt>, que usan tablas de traducci&#243;n apropiadas para cada tipo.</p><p>(Contribuci&#243;n de Georg Brandl; <a class="reference external" href="http://bugs.python.org/issue5675">issue 5675</a>).</p></li><li><p class="first">La sintaxis de la sentencia <tt class="docutils literal"><span class="pre">with</span></tt> permite ahora usar varios gestores de contexto en una &#250;nica sentencia:</p><pre class="literal-block"><br />&gt;&gt;&gt; with open('mylog.txt') as infile, open('a.out', 'w') as outfile:<br />...     for line in infile:<br />...         if '&lt;critical&gt;' in line:<br />...             outfile.write(line)<br /></pre><p>Con esta nueva sintaxis, la funci&#243;n <tt class="docutils literal"><span class="pre">contextlib.nested()</span></tt> ya no hace falta, y queda desfasada.</p><p>(Contribuci&#243;n de Georg Brandl y Mattias Br&#228;ndstr&#246;m; appspot <a class="reference external" href="http://bugs.python.org/issue53094">issue 53094</a>.)</p></li><li><p class="first"><tt class="docutils literal"><span class="pre">round(x,</span> <span class="pre">n)</span></tt> ahora devuelve un entero si <tt class="docutils literal"><span class="pre">x</span></tt> es entero; antes devolv&#237;a un n&#250;mero en coma flotante:</p><pre class="literal-block"><br />&gt;&gt;&gt; round(1123, -2)<br />1100<br /></pre><p>(Contribuci&#243;n de Mark Dickinson; <a class="reference external" href="http://bugs.python.org/issue4707">issue 4707</a>).</p></li><li><p class="first">Python utiliza ahora el algoritmo de David Gay, que encuentra la representaci&#243;n de un n&#250;mero en coma flotante m&#225;s corta posible, de manera tal que no cambie su valor. Esto deber&#237;a ayudar a aclarar algunas confusiones habituales que ocurren con la representaci&#243;n de n&#250;meros de coma flotante en binario.</p><p>Esto se ve claramente con n&#250;meros como <tt class="docutils literal"><span class="pre">1.1</span></tt>, que no tienen representaci&#243;n exacta en binario con coma flotante. Dado que no hay una representaci&#243;n exacta, una expresi&#243;n como <tt class="docutils literal"><span class="pre">float(1.1)</span></tt> se eval&#250;a al n&#250;mero m&#225;s cercano que si tiene representaci&#243;n exacta, que en este caso es <tt class="docutils literal"><span class="pre">0x1.199999999999ap+0</span></tt> en hexadecimal o <tt class="docutils literal"><span class="pre">1.100000000000000088817841970012523233890533447265625</span></tt> en decimal. Este valor m&#225;s cercano es que el se usar&#225; en subsiguientes operaciones de coma flotante.</p><p>La novedad consiste en como se muestra ahora el valor. Antes, la aproximaci&#243;n de Python era bastante sencilla. El valor de <tt class="docutils literal"><span class="pre">repr(1.1)</span></tt> se calculaba como <tt class="docutils literal"><span class="pre">format(1.1,</span> <span class="pre">'.17g')</span></tt>, lo que resultaba en <tt class="docutils literal"><span class="pre">'1.1000000000000001'</span></tt>. La ventaja de usar esos diecisiete d&#237;gitos fraccionarios era garantizar que, siguiendo la norma IEEE-754, la expresi&#243;n <tt class="docutils literal"><span class="pre">eval(repr(1.1))</span></tt> devolver&#237;a un valor redondeado que ser&#237;a exactamente igual al original. La desventaja era que mucha gente no entend&#237;a este comportamiento (confundiendo las limitaciones intr&#237;nsecas de la representaci&#243;n en binario con coma flotante con un problema propio de Python).</p><p>El algoritmo usado ahora para <tt class="docutils literal"><span class="pre">repr(1.1)</span></tt> es m&#225;s inteligente, y devuelve <tt class="docutils literal"><span class="pre">'1.1'</span></tt>. Internamente, lo que hace es buscar todas las cadenas de texto equivalentes (es decir, las que se almacenar&#237;an con el mismo valor en coma flotante), y devuelve la m&#225;s corta.</p><p>El nuevo algoritmo produce representaciones m&#225;s claras, cuando es posible, pero no cambia para nada el almacenamiento interno del valor, por lo que sigue pasando que <tt class="docutils literal"><span class="pre">1.1</span> <span class="pre">+</span> <span class="pre">2.2</span> <span class="pre">!=</span> <span class="pre">3.3</span></tt>, aun cuando la representaci&#243;n puede sugerir lo contrario.</p><p>El nuevo algoritmo requiere de ciertas capacidades en la implementaci&#243;n subyacente de n&#250;meros en coma flotante, por lo que se sigue utilizando el algoritmo antiguo si dichas caracter&#237;sticas no est&#225;n presentes en la plataforma. Adem&#225;s, el m&#243;dulo <tt class="docutils literal"><span class="pre">pickle</span></tt>, para garantizar que se mantenga la portabilidad entre plataformas diferentes, tambi&#233;n sigue usando el algoritmo antiguo.</p><p>(Contribuci&#243;n de Eric Smith y Mark Dickinson; <a class="reference external" href="http://bugs.python.org/issue1580">issue 1580</a>).</p></li></ul></blockquote></div>  <div class="section" id="m-dulos-nuevos-mejorados-o-desfasados"><h2>M&#243;dulos nuevos, mejorados o desfasados</h2><blockquote><ul><li><p class="first">A&#241;adida una nueva clase, <tt class="docutils literal"><span class="pre">collections.Counter</span></tt>, para facilitar el recuento de elementos &#250;nicos dentro de una secuencia o iterable:</p><pre class="literal-block"><br />&gt;&gt;&gt; Counter(['red', 'blue', 'red', 'green', 'blue', 'blue'])<br />Counter({'blue': 3, 'red': 2, 'green': 1})<br /></pre><p>(Contribuci&#243;n de Raymond Hettinger; <a class="reference external" href="http://bugs.python.org/issue1696199">issue 1696199</a>).</p></li><li><p class="first">Se ha a&#241;adido un nuevo m&#243;dulo, <tt class="docutils literal"><span class="pre">tkinter.ttk</span></tt>, que permite el acceso al conjunto de controles con temas de Tk. La idea es separar, en la medida de lo posible, el c&#243;digo de implementaci&#243;n del comportamiento de los controles del c&#243;digo que implementa su apariencia.</p><p>(Contribuci&#243;n de Guilherme Polo; <a class="reference external" href="http://bugs.python.org/issue2983">issue 2983</a>.)</p></li><li><p class="first">Las clases <tt class="docutils literal"><span class="pre">gzip.GzipFile</span></tt> y <tt class="docutils literal"><span class="pre">bz2.BZ2File</span></tt> ahora soportan en protocolo de gesti&#243;n de contextos:</p><pre class="literal-block"><br />&gt;&gt;&gt; # Automatically close file after writing<br />&gt;&gt;&gt; with gzip.GzipFile(filename, &quot;wb&quot;) as f:<br />...     f.write(b&quot;xxx&quot;)<br /></pre><p>(Contribuci&#243;n de Antoine Pitrou.)</p></li><li><p class="first">El m&#243;dulo <tt class="docutils literal"><span class="pre">decimal</span></tt> incorpora un nuevo m&#233;todo que permite crear un n&#250;mero decimal a partir de un <tt class="docutils literal"><span class="pre">float</span></tt> binario. La conversi&#243;n es exacta, pero puede ser, en ocasiones, sorprendente:</p><pre class="literal-block"><br />&gt;&gt;&gt; Decimal.from_float(1.1)<br />Decimal('1.100000000000000088817841970012523233890533447265625')<br /></pre><p>Este numero decimal tan largo que aparece como resultado es el n&#250;mero fraccionario binario que se almacena para el valor <tt class="docutils literal"><span class="pre">1.1</span></tt>. El gran n&#250;mero de d&#237;gitos se debe a que un valor como <tt class="docutils literal"><span class="pre">1.1</span></tt> no puede representarse de forma exacta en binario.</p><p>(Contribuci&#243;n de Raymond Hettinger y Mark Dickinson.)</p></li><li><p class="first">El m&#243;dulo <tt class="docutils literal"><span class="pre">itertools</span></tt> gana dos nuevas funciones. La funci&#243;n <tt class="docutils literal"><span class="pre">itertools.combinations_with_replacement()</span></tt> permite nuevos c&#225;lculos combinatorios, incluyendo permutaciones y productos cartesianos. La funci&#243;n <tt class="docutils literal"><span class="pre">itertools.compress()</span></tt> imita en nombre y comportamiento a su an&#225;loga en APL. Adem&#225;s, la funci&#243;n <tt class="docutils literal"><span class="pre">itertools.count()</span></tt> cuenta ahora con un par&#225;metro opcional, <tt class="docutils literal"><span class="pre">step</span></tt>, y puede aceptar cualquier secuencia contable, incluyendo <tt class="docutils literal"><span class="pre">fractions.Fraction</span></tt> y <tt class="docutils literal"><span class="pre">decimal.Decimal</span></tt>:</p><pre class="literal-block"><br />&gt;&gt;&gt; [p+q for p,q in combinations_with_replacement('LOVE', 2)]<br />['LL', 'LO', 'LV', 'LE', 'OO', 'OV', 'OE', 'VV', 'VE', 'EE']<br /><br />&gt;&gt;&gt; list(compress(data=range(10), selectors=[0,0,1,1,0,1,0,1,0,0]))<br />[2, 3, 5, 7]<br /><br />&gt;&gt;&gt; c = count(start=Fraction(1,2), step=Fraction(1,6))<br />&gt;&gt;&gt; [next(c), next(c), next(c), next(c)]<br />[Fraction(1, 2), Fraction(2, 3), Fraction(5, 6), Fraction(1, 1)]<br /></pre><p>(Contribuci&#243;n de Raymond Hettinger).</p></li><li><p class="first"><tt class="docutils literal"><span class="pre">collections.namedtuple()</span></tt> soporta ahora un par&#225;metro opcional, <tt class="docutils literal"><span class="pre">rename</span></tt>, que permite que campos con nombres no v&#225;lidos se conviertan autom&#225;ticamente en nombres basados en la posici&#243;n, como <tt class="docutils literal"><span class="pre">_0</span></tt>, <tt class="docutils literal"><span class="pre">_1</span></tt>, etc. Este opci&#243;n resulta ser muy &#250;til para aquellos casos en que los nombres son generados a partir de una fuente externa, como una cabecera de un fichero CVS, una lista de campos de una consulta SQL, o una entrada del usuario:</p><pre class="literal-block"><br />&gt;&gt;&gt; query = input()<br />SELECT region, dept, count(*) FROM main GROUPBY region, dept<br /><br />&gt;&gt;&gt; cursor.execute(query)<br />&gt;&gt;&gt; query_fields = [desc[0] for desc in cursor.description]<br />&gt;&gt;&gt; UserQuery = namedtuple('UserQuery', query_fields, rename=True)<br />&gt;&gt;&gt; pprint.pprint([UserQuery(*row) for row in cursor])<br />[UserQuery(region='South', dept='Shipping', _2=185),<br /> UserQuery(region='North', dept='Accounting', _2=37),<br /> UserQuery(region='West', dept='Sales', _2=419)]<br /></pre><p>(Contribuci&#243;n de Raymond Hettinger; <a class="reference external" href="http://bugs.python.org/issue1818">issue 1818</a>).</p></li><li><p class="first">Las funciones <tt class="docutils literal"><span class="pre">re.sub()</span></tt>, <tt class="docutils literal"><span class="pre">re.subn()</span></tt> y <tt class="docutils literal"><span class="pre">re.split()</span></tt> aceptan ahora el par&#225;metro <tt class="docutils literal"><span class="pre">flags</span></tt>.</p><p>(Contribuci&#243;n de Gregory Smith.)</p></li><li><p class="first">El m&#243;dulo <tt class="docutils literal"><span class="pre">logging</span></tt> implementa una nueva clase, <tt class="docutils literal"><span class="pre">logging.NullHandler</span></tt>, para aquellas aplicaciones que no usan <tt class="docutils literal"><span class="pre">logging</span></tt>, pero llaman a librer&#237;as que si lo hacen. El uso de un manejador nulo como este permite evitar los mensajes de aviso espurios como &quot;<em>No handlers could be found for logger foo</em>&quot;:</p><pre class="literal-block"><br />&gt;&gt;&gt; h = logging.NullHandler()<br />&gt;&gt;&gt; logging.getLogger(&quot;foo&quot;).addHandler(h)<br /></pre><p>(Contribuci&#243;n de Vinay Sajip; <a class="reference external" href="http://bugs.python.org/issue4384">issue 4384</a>).</p></li><li><p class="first">El m&#243;dulo <tt class="docutils literal"><span class="pre">runpy</span></tt> acepta ahora un nuevo par&#225;metro de l&#237;nea de comandos, <tt class="docutils literal"><span class="pre">-m</span></tt>, que permite la ejecuci&#243;n de un paquete mediante la b&#250;squeda y ejecuci&#243;n de un subm&#243;dulo <tt class="docutils literal"><span class="pre">__main__</span></tt>.</p><p>(Contribuci&#243;n de Andi Vajda; <a class="reference external" href="http://bugs.python.org/issue4195">issue 4195</a>).</p></li><li><p class="first">El m&#243;dulo <tt class="docutils literal"><span class="pre">pdb</span></tt> puede ahora acceder y mostrar c&#243;digo fuente cargado con el m&#243;dulo <tt class="docutils literal"><span class="pre">zipimport</span></tt> (o cualquier otro cargador de c&#243;digo que sea conforme al <em>PEP 302</em>).</p><p>(Contribuci&#243;n de Alexander Belopolsky; <a class="reference external" href="http://bugs.python.org/issue4201">issue 4201</a>).</p></li><li><p class="first">Los objetos de tipo <tt class="docutils literal"><span class="pre">functools.partial</span></tt> pueden ser ahora almacenados con <tt class="docutils literal"><span class="pre">pickled</span></tt>.</p><p>(Sugerencia de Antoine Pitrou y Jesse Noller.  Implementado por Jack Diedrich; <a class="reference external" href="http://bugs.python.org/issue5228">issue 5228</a>).</p></li><li><p class="first">Se ha a&#241;adido documentaci&#243;n <tt class="docutils literal"><span class="pre">pydoc</span></tt> a los s&#237;mbolos, de forma que <tt class="docutils literal"><span class="pre">help('&amp;#64;')</span></tt> funciona tal y como se esperar&#237;a en un entorno interactivo.</p><p>(Contribuci&#243;n de David Laban; <a class="reference external" href="http://bugs.python.org/issue4739">issue 4739</a>).</p></li><li><p class="first">El m&#243;dulo <tt class="docutils literal"><span class="pre">unittest</span></tt> ahora permite desactivar pruebas individuales o clases de pruebas, y tambi&#233;n permite marcar una prueba como un fallo esperado, es decir, podemos hacer pruebas y marcarlas sabiendo que est&#225;n mal, pero que no deben ser considerados como fallos en los resultados:</p><pre class="literal-block"><br />class TestGizmo(unittest.TestCase):<br /><br />    &#64;unittest.skipUnless(sys.platform.startswith(&quot;win&quot;), &quot;requires Windows&quot;)<br />    def test_gizmo_on_windows(self):<br />        ...<br /><br />    &#64;unittest.expectedFailure<br />    def test_gimzo_without_required_library(self):<br />        ...<br /></pre><p>Adem&#225;s, las pruebas que comprueban que se eleven excepciones act&#250;an como gestores de contexto, por lo que pueden ser usadas con sentencias <tt class="docutils literal"><span class="pre">with</span></tt>:</p><pre class="literal-block"><br />def test_division_by_zero(self):<br />    with self.assertRaises(ZeroDivisionError):<br />        x / 0<br /></pre><p>Se han incluido varios m&#233;todos de comprobaci&#243;n nuevos, como <tt class="docutils literal"><span class="pre">assertSetEqual()</span></tt>, <tt class="docutils literal"><span class="pre">assertDictEqual()</span></tt>, <tt class="docutils literal"><span class="pre">assertDictContainsSubset()</span></tt>, <tt class="docutils literal"><span class="pre">assertListEqual()</span></tt>, <tt class="docutils literal"><span class="pre">assertTupleEqual()</span></tt>, <tt class="docutils literal"><span class="pre">assertSequenceEqual()</span></tt>, <tt class="docutils literal"><span class="pre">assertRaisesRegexp()</span></tt>, <tt class="docutils literal"><span class="pre">assertIsNone()</span></tt>, y <tt class="docutils literal"><span class="pre">assertIsNotNone()</span></tt>.</p><p>(Contribuci&#243;n de Benjamin Peterson y Antoine Pitrou.)</p></li><li><p class="first">El m&#243;dulo <tt class="docutils literal"><span class="pre">io</span></tt> incluye tres constantes nuevas para ser usadas con <tt class="docutils literal"><span class="pre">seek()</span></tt>: <tt class="docutils literal"><span class="pre">SEEK_SET</span></tt>, <tt class="docutils literal"><span class="pre">SEEK_CUR</span></tt>, y <tt class="docutils literal"><span class="pre">SEEK_END</span></tt>.</p></li><li><p class="first">La tupla <tt class="docutils literal"><span class="pre">sys.version_info</span></tt> es ahora una tupla con nombres:</p><pre class="literal-block"><br />&gt;&gt;&gt; sys.version_info<br />sys.version_info(major=3, minor=1, micro=0, releaselevel='alpha', serial=2)<br /></pre><p>(Contribuci&#243;n de Ross Light; <a class="reference external" href="http://bugs.python.org/issue4285">issue 4285</a>.)</p></li><li><p class="first">Los m&#243;dulos <tt class="docutils literal"><span class="pre">nntplib</span></tt> y <tt class="docutils literal"><span class="pre">imaplib</span></tt> soportan ya IPv6.</p><blockquote><p>(Contribuci&#243;n de Derek Morr; <a class="reference external" href="http://bugs.python.org/issue1655">issue 1655</a> e <a class="reference external" href="http://bugs.python.org/issue1664">issue 1664</a>.)</p></blockquote></li><li><p class="first">El m&#243;dulo <tt class="docutils literal"><span class="pre">pickle</span></tt> ha sido adaptado para mejorar su interoperabilidad con Python 2.X, cuando se usa el protocolo 2 o inferior. La reorganizaci&#243;n de la librer&#237;a est&#225;ndar cambi&#243; la referencia formal para muchos objetos. Por ejemplo, <tt class="docutils literal"><span class="pre">__builtin__.set</span></tt> se llama <tt class="docutils literal"><span class="pre">builtins.set</span></tt> en Python 3. Estos cambios dificultaban los intentos de compartir datos entre diferentes versiones de Python. Pero ahora, cuando se selecciona un protocolo de nivel 2 o inferior, <tt class="docutils literal"><span class="pre">pickler</span></tt> usar&#225; autom&#225;ticamente los nombres antiguos de Python 2, tanto para la carga como para el almacenamiento. Este mapeo est&#225; activo por defecto, pero puede ser desactivado con la opci&#243;n <tt class="docutils literal"><span class="pre">fix_imports</span></tt>:</p><pre class="literal-block"><br />&gt;&gt;&gt; s = {1, 2, 3}<br />&gt;&gt;&gt; pickle.dumps(s, protocol=0)<br />b'c__builtin__\nset\np0\n((lp1\nL1L\naL2L\naL3L\natp2\nRp3\n.'<br />&gt;&gt;&gt; pickle.dumps(s, protocol=0, fix_imports=False)<br />b'cbuiltins\nset\np0\n((lp1\nL1L\naL2L\naL3L\natp2\nRp3\n.'<br /></pre><p>Un efecto desafortunado, pero inevitable, de estos cambios es que los datos convertidos por <tt class="docutils literal"><span class="pre">pickle</span></tt> con protocolo 2 y Python 3.1 no ser&#225;n legibles en Python 3.0. Deber&#237;a usarse siempre el protocolo m&#225;s reciente de <tt class="docutils literal"><span class="pre">pickle</span></tt>, el 3, para los datos que se est&#233;n migrando entre implementaciones Python 3.X, ya que este protocolo no intenta mantener la compatibilidad con Python 2.X.</p><p>(Contribuci&#243;n de Alexandre Vassalotti y Antoine Pitrou, <a class="reference external" href="http://bugs.python.org/issue6137">issue 6137</a>.)</p></li><li><p class="first">Se ha a&#241;adido un nuevo m&#243;dulo, <tt class="docutils literal"><span class="pre">importlib</span></tt>, que es una implementaci&#243;n de referencia de la sentencia <tt class="docutils literal"><span class="pre">import</span></tt> (y de su contrapartida, la funci&#243;n <tt class="docutils literal"><span class="pre">__import__()</span></tt>) completa, escrita en Python puro y, por tanto, portable. Esto es un avance considerable en la documentaci&#243;n y definici&#243;n de las distintas acciones que ocurren durante una importaci&#243;n.</p><p>(Contribuci&#243;n de Brett Cannon.)</p></li></ul></blockquote></div>  <div class="section" id="optimizaciones"><h2>Optimizaciones</h2><p>Se han incorporado algunas mejoras importantes en rendimiento.</p><blockquote><ul><li><p class="first">La nueva librer&#237;a de Entrada/Salida (Tal y como se define en el PEP 3116) estaba escrita en su mayor&#237;a en Python, y ha demostrado r&#225;pidamente ser un cuello de botella en Python 3.0. En Python 3.1, esta librer&#237;a ha sido reescrita totalmente en <tt class="docutils literal"><span class="pre">C</span></tt>, y es entre 2 y 20 veces m&#225;s r&#225;pida, dependiendo de la tarea que se trate. La versi&#243;n escrita en Python puro sigue disponible, para el que quiera experimentar con ella, mediante el m&#243;dulo <tt class="docutils literal"><span class="pre">_pyio</span></tt>.</p><p>(Contribuci&#243;n de Amaury Forgeot d'Arc y Antoine Pitrou).</p></li><li><p class="first">Se ha a&#241;adido cierta heur&#237;stica al recolector de basura, de forma que este trata como no trazables (<em>untrackable</em>) las tuplas o diccionarios que contengan s&#243;lo objetos no trazables. De esta forma se reduce el tama&#241;o de las colecciones y, por tanto, la sobrecarga del recolector de basura para programas que est&#225;n funcionando durante mucho tiempo, dependiendo del uso que hagan de los tipos de datos.</p><p>(Contribuci&#243;n de Antoine Pitrou, <a class="reference external" href="http://bugs.python.org/issue4688">issue 4688</a>.)</p></li><li><p class="first">Existe una nueva opci&#243;n de configuraci&#243;n llamada <tt class="docutils literal"><span class="pre">--with-computed-gotos</span></tt>, para los compiladores que lo soporten (Especialmente gcc, SunPro e icc). Con esta opci&#243;n activa, el bucle de evaluaci&#243;n de bytecode se compila con un nuevo mecanismo de expedici&#243;n que acelera la velocidad de ejecuci&#243;n hasta un 20%, dependiendo del sistema, del compilador y del test de velocidad.</p><p>(Contribuci&#243;n de Antoine Pitrou junto con otros participantes, <a class="reference external" href="http://bugs.python.org/issue4753">issue 4753</a>).</p></li><li><p class="first">La decodificaci&#243;n de UTF-8, UTF-16 y LATIN-1 es ahora entre dos y cuatro veces m&#225;s r&#225;pida.</p><p>(Contribuci&#243;n de Antoine Pitrou y Amaury Forgeot d'Arc, <a class="reference external" href="http://bugs.python.org/issue4868">issue 4868</a>).</p></li><li><p class="first">El m&#243;dulo <tt class="docutils literal"><span class="pre">json</span></tt> tiene ahora una extensi&#243;n escrita en C desarrollada esencialmente para mejorar su rendimiento. Adem&#225;s, la API ha sido modificada para que json solo funcione con tipos <tt class="docutils literal"><span class="pre">str</span></tt>, y no con <tt class="docutils literal"><span class="pre">bytes</span></tt>. Este cambio acerca el comportamiento del m&#243;dulo a la especificaci&#243;n JSON, que est&#225; definida en t&#233;rminos de Unicode.</p><p>(Contribuci&#243;n de Bob Ippolito y conversi&#243;n a Py3.1 por Antoine Pitrou y Benjamin Peterson; <a class="reference external" href="http://bugs.python.org/issue4136">issue 4136</a>).</p></li><li><p class="first">El desempaquetado con <tt class="docutils literal"><span class="pre">Unpickling</span></tt> mantiene internamente los atributos de nombre de los objetos almacenados. Esto ahorra memoria y permite que los datos empaquetados sean m&#225;s peque&#241;os.</p><p>(Contribuci&#243;n de Jake McGuire y Antoine Pitrou; <a class="reference external" href="http://bugs.python.org/issue5084">issue 5084</a>.)</p></li></ul></blockquote></div>  <div class="section" id="idle"><h2>IDLE</h2><blockquote><ul><li><p class="first">El men&#250; de formato de IDLE proporciona una nueva opci&#243;n que permite eliminar los espacios en blanco superfluos al final de cada l&#237;nea del c&#243;digo fuente.</p><p>(Contribuci&#243;n de Roger D. Serwy; <a class="reference external" href="http://bugs.python.org/issue5150">issue 5150</a>).</p></li></ul></blockquote></div>  <div class="section" id="build-y-c-api-changes"><h2>Build y C API Changes</h2><p>Los cambios en el proceso de compilaci&#243;n de Python, as&#237; como de la API en C, incluyen los siguientes:</p><blockquote><ul><li><p class="first">Los n&#250;meros enteros se almacenan internamente o bien en base 2^15 o en base 2^30, determin&#225;ndose la base en tiempo de compilaci&#243;n. Anteriormente, siempre se almacenaban en base 2^15. Usando la base 2^30 se consigue un mejor rendimiento en m&#225;quinas de 64 bits, pero los resultados con m&#225;quinas de 32 bits no eran consistentes. Por esto, el comportamiento asumido es usar base 2^30 en m&#225;quinas de 64 bits y base 2^15 en m&#225;quinas de 32 bits. En Unix hay una nueva opci&#243;n de configuraci&#243;n, <tt class="docutils literal"><span class="pre">--enable-big-digits</span></tt>, que se puede usar para modificar este comportamiento.</p><p>Aparte de las mejoras en el rendimiento, esta cambio deber&#237;a ser invisible para el usuario final, con una excepci&#243;n: Para prop&#243;sitos de prueba y de depuraci&#243;n, hay un valor, <tt class="docutils literal"><span class="pre">sys.int_info</span></tt>, que proporciona informaci&#243;n acerca del formato interno; devuelve el n&#250;mero de bits por d&#237;gito y el tama&#241;o en bytes del tipo de datos en <tt class="docutils literal"><span class="pre">C</span></tt> que se usa para almacenar cada d&#237;gito:</p><pre class="literal-block"><br />&gt;&gt;&gt; import sys<br />&gt;&gt;&gt; sys.int_info<br />sys.int_info(bits_per_digit=30, sizeof_digit=4)<br /></pre><p>(Contribuci&#243;n de Mark Dickinson; <a class="reference external" href="http://bugs.python.org/issue4258">issue 4258</a>).</p></li><li><p class="first">La funci&#243;n <tt class="docutils literal"><span class="pre">PyLong_AsUnsignedLongLong()</span></tt> ahora trata el caso de n&#250;meros <tt class="docutils literal"><span class="pre">pylong</span></tt> negativos, elevando una excepci&#243;n de tipo <tt class="docutils literal"><span class="pre">OverflowError</span></tt> en vez de <tt class="docutils literal"><span class="pre">TypeError</span></tt>.</p><p>(Contribuci&#243;n de Mark Dickinson y Lisandro Dalcrin; <a class="reference external" href="http://bugs.python.org/issue5175">issue 5175</a>).</p></li><li><p class="first"><tt class="docutils literal"><span class="pre">PyNumber_Int</span></tt> Queda desfasado. Se debe reemplazar por <tt class="docutils literal"><span class="pre">PyNumber_Long</span></tt>.</p><p>(Contribuci&#243;n de Mark Dickinson; <a class="reference external" href="http://bugs.python.org/issue4910">issue 4910</a>).</p></li><li><p class="first">A&#241;adida una nueva funci&#243;n <tt class="docutils literal"><span class="pre">PyOS_string_to_double</span></tt> que reemplaza a las ya obsoletas <tt class="docutils literal"><span class="pre">PyOS_ascii_strtod</span></tt> y <tt class="docutils literal"><span class="pre">PyOS_ascii_atof</span></tt>.</p><p>(Contribuci&#243;n de Mark Dickinson; <a class="reference external" href="http://bugs.python.org/issue5914">issue 5914</a>).</p></li><li><p class="first">A&#241;adido <tt class="docutils literal"><span class="pre">PyCapsule</span></tt> como reemplazo de la API <tt class="docutils literal"><span class="pre">PyCObject</span></tt>. La diferencia principal es que el nuevo tipo tiene una interfaz bien definida para pasar informaci&#243;n de seguridad de tipos, y una signatura m&#225;s sencilla en las llamadas al destructor. El tipo antiguo ten&#237;a una API problem&#225;tica y queda desfasada.</p><p>(Contribuci&#243;n de Larry Hastings; <a class="reference external" href="http://bugs.python.org/issue5630">issue 5630</a>).</p></li></ul></blockquote></div>  <div class="section" id="migraci-n-a-python-3-1"><h2>Migraci&#243;n a Python 3.1</h2><p>Esta secci&#243;n lista, de los cambios y correcciones descritos con anterioridad, aquellos que puedan implicar cambios en tu c&#243;digo.</p><blockquote><ul><li><p class="first">La nueva representaci&#243;n de n&#250;meros en coma flotante podr&#237;a romper el c&#243;digo de bater&#237;as de pruebas (<tt class="docutils literal"><span class="pre">unittest</span></tt>) o documentaci&#243;n en el propio c&#243;digo (<tt class="docutils literal"><span class="pre">doctests</span></tt>). Por ejemplo:</p><pre class="literal-block"><br />def e():<br />    ``'Compute the base of natural logarithms.<br /><br />    &gt;&gt;&gt; e()<br />    2.7182818284590451<br /><br />    ``'<br />    return sum(1/math.factorial(x) for x in reversed(range(30)))<br /><br />doctest.testmod()<br /><br />**********************************************************************<br />Failed example:<br />    e()<br />Expected:<br />    2.7182818284590451<br />Got:<br />    2.718281828459045<br />**********************************************************************<br /></pre></li><li><p class="first">El mapeo autom&#225;tico de nombres en el m&#243;dulo <tt class="docutils literal"><span class="pre">pickle</span></tt> para el protocolo 2 e inferiores puede hacer que los datos empaquetados en Python 3.1 no sean legibles para Python 3.0. Una soluci&#243;n es usar el protocolo 3. Otra soluci&#243;n ser&#237;a ajustar a <tt class="docutils literal"><span class="pre">False</span></tt> la nueva opci&#243;n <tt class="docutils literal"><span class="pre">fix_imports</span></tt>. V&#233;anse los detalles en la discusi&#243;n anterior sobre este tema.</p></li></ul></blockquote></div>
    </div>
</div></div>
</div>

</div>
<div id="feedstats">
    <div id="xmls">
        
    <a href="foafroll.xml"><img src="foaf.png" title="FOAF" alt="FOAF" /></a>
    <a href="opml.xml"><img src="opml.png" title="OPML" alt="OPML" /></a>
    <a href="rss.xml"><img src="rss.png" title="RSS" alt="RSS" /></a>

    </div>
    <h2 id="feedmain"><a href="http://es.python.org" style="color: black; font-size: 20px; text-decoration: none;"><span style="color:#d40000">e</span><span style="color:#f3b52c">s</span>.<span style="color:#43648b">pyt</span><span style="color:#f3b52c">hon</span>.org</a></h2>
    <h2 id="feedlaststatus">Estado</h2>
    <div id="log">
        
    <a href="log.html">Estado de fuentes</a>

    </div>
    <h2 id="feedsarchive">Archivo</h2>
    <div id="archive">
        <table class="calendar">
<tr class="cal-head">
<td class="cal-prev"><a href="index-2009-06-30.html">&lt;</a></td>
<td class="cal-month" colspan="5">julio 2009</td>
<td class="cal-next"><a href="index-2009-09-04.html">&gt;</a></td>
</tr>
<tr class="cal-days">
<th>lun</th><th>mar</th><th>mi&#233;</th><th>jue</th><th>vie</th><th>s&#225;b</th><th>dom</th></tr>
<tr class="cal-week">
<td class="cal-day"><em class="cal-othermonth">29</em></td><td class="cal-day"><em class="cal-othermonth">30</em></td><td class="cal-day"><a class="cal-link" href="index-2009-07-01.html">01</a></td><td class="cal-day">02</td><td class="cal-day"><strong class="cal-current">03</strong></td><td class="cal-day">04</td><td class="cal-day">05</td></tr>
<tr class="cal-week">
<td class="cal-day">06</td><td class="cal-day">07</td><td class="cal-day"><a class="cal-link" href="index-2009-07-08.html">08</a></td><td class="cal-day"><a class="cal-link" href="index-2009-07-09.html">09</a></td><td class="cal-day">10</td><td class="cal-day">11</td><td class="cal-day">12</td></tr>
<tr class="cal-week">
<td class="cal-day">13</td><td class="cal-day">14</td><td class="cal-day">15</td><td class="cal-day">16</td><td class="cal-day">17</td><td class="cal-day">18</td><td class="cal-day">19</td></tr>
<tr class="cal-week">
<td class="cal-day">20</td><td class="cal-day">21</td><td class="cal-day">22</td><td class="cal-day">23</td><td class="cal-day">24</td><td class="cal-day">25</td><td class="cal-day">26</td></tr>
<tr class="cal-week">
<td class="cal-day">27</td><td class="cal-day">28</td><td class="cal-day">29</td><td class="cal-day">30</td><td class="cal-day">31</td><td class="cal-day"><em class="cal-othermonth">01</em></td><td class="cal-day"><em class="cal-othermonth">02</em></td></tr>
</table>

    </div>
    <h2 id="feedsblogs">Blogs</h2>
    <div id="feedlist">
        
    
<a href="http://maengora.blogspot.com/search/label/python">Actualidad Informatica</a>
<a href="http://maengora.blogspot.com/feeds/posts/default/-/python"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="">Alfffa Solutions</a>
<a href="http://alfffa.net/blog/category/informatica/programacion/python/feed/"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="">codeplasticlesthack</a>
<a href="http://lesthack.com.mx/category/programacion/python/feed/"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="">Dead Epsilon</a>
<a href="https://juanlu001.github.io/rss.xml"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://www.eferro.net/search/label/Python">e-ferro</a>
<a href="http://www.eferro.net/feeds/posts/default/-/Python"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="https://www.atareao.es">El Atareao</a>
<a href="http://feeds.feedburner.com/ElAtareao_python"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://www.elornitorrincoenmascarado.com/search/label/python">El Ornitorrinco Enmascarado</a>
<a href="http://www.elornitorrincoenmascarado.com/feeds/posts/default/-/python/?alt=rss"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://elviajedelnavegante.blogspot.com/search/label/python">El viaje del navegante</a>
<a href="http://elviajedelnavegante.blogspot.com/feeds/posts/default/-/python"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="https://www.freakspot.net/">Freak Spot</a>
<a href="https://www.freakspot.net/feeds/python.atom.xml"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="">Frogblog</a>
<a href="http://blog.willinux.net/?cat=14&feed=rss2"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="https://www.genbetadev.com">Genbeta:dev</a>
<a href="https://www.genbetadev.com/categoria/python/rss2.xml"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://blog.ch3m4.org/">Hyperreals *R</a>
<a href="http://blog.ch3m4.org/feeds/python.atom.xml"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="">JavAguirre.net</a>
<a href="http://javaguirre.me/python.xml"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://blep.blogspot.com/search/label/python">Javier Santana</a>
<a href="http://blep.blogspot.com/feeds/posts/default/-/python"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://joedicastro.com">joe di castro</a>
<a href="http://joedicastro.com/rss.xml"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://blog.crespo.org.ve/search/label/python">La libertad de desarrollar...</a>
<a href="http://blog.crespo.org.ve/feeds/posts/default/-/python"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="">Monobot</a>
<a href="http://monobotblog.alvarezalonso.es/archives/category/python/feed"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://mundo-python.blogspot.com/">Mundo Python</a>
<a href="http://mundo-python.blogspot.com/feeds/posts/default"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://www.userlinux.net">oscarmlage</a>
<a href="https://userlinux.net/tag-python/feed/"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="https://pybonacci.wordpress.com">Pybonacci</a>
<a href="https://pybonacci.wordpress.com/feed/"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://blog-es.python.org/">Python Insider ES</a>
<a href="http://feeds.feedburner.com/PythonInsiderES"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="">Read The Fucking Docs</a>
<a href="http://readthefuckingdocumentation.blogspot.com/feeds/posts/default/-/python"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="http://simelo-es.blogspot.com/search/label/python">Simelo pides...</a>
<a href="http://simelo-es.blogspot.com/feeds/posts/default/-/python"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="https://beastieux.com">The::Beastieux</a>
<a href="https://beastieux.com/category/python/feed/"><img src="feed-icon.png" alt=""/></a>
<br />
<a href="https://unoyunodiez.com">Uno y uno = diez</a>
<a href="https://unoyunodiez.com/tag/python-2/feed/"><img src="feed-icon.png" alt=""/></a>
<br />

    </div>
</div>
<div id="footer">
<p id="aboutrawdog">Generado por
<a href="http://offog.org/code/rawdog.html">rawdog</a>
version 2.22rc1
by <a href="mailto:ats@offog.org">Adam Sampson</a>.</p>
<p>Theme por <a href="http://code.joedicastro.com/my-rawdog-planet">joe di castro</a>. Basado en el <a href="http://github.com/ralsina/planeta-pyar/tree/master">trabajo de Roberto Alsina</a> para PyAr</p>
<p>


</p>
</div>
</body>
</html>
